@model IEnumerable<RentalService.Models.AdPost>
@{
    ViewData["Title"] = "Bài quảng cáo chờ duyệt";
}
<h2>Bài quảng cáo chờ duyệt</h2>
<div class="row g-4">
@if (!Model.Any())
{
    <div class="alert alert-info">Không có bài quảng cáo nào chờ duyệt.</div>
}
else
{
    foreach (var ad in Model)
    {
        <div class="col-12 col-md-6 col-lg-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column justify-content-between">
                    <div>
                        <h5 class="card-title">@ad.Title</h5>
                        <div class="mb-2">
                            <span class="badge @(ad.PackageType == RentalService.Models.AdPackageType.Dong ? "bg-primary text-white" :
                                                ad.PackageType == RentalService.Models.AdPackageType.Bac ? "bg-secondary text-white" :
                                                ad.PackageType == RentalService.Models.AdPackageType.Vang ? "bg-warning text-dark" :
                                                ad.PackageType == RentalService.Models.AdPackageType.KimCuong ? "bg-info text-white" :
                                                "bg-light text-dark")">
                                @ad.PackageType
                            </span>
                            <span class="badge bg-secondary">@ad.CreatedAt.ToString("dd/MM/yyyy")</span>
                        </div>
                        <div class="mb-2">Lượt xem: <b>@ad.ViewCount</b></div>
                        <div class="mb-2">Chủ trọ: <span class="text-primary">@ad.HostId</span></div>
                        <div class="mb-2">
                            <a href="@Url.Action("Details", "AdPosts", new { id = ad.Id })" class="btn btn-outline-info btn-sm" target="_blank">Xem chi tiết</a>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mt-2">
                        <span class="badge @(ad.IsActive ? "bg-success" : "bg-secondary")">@(ad.IsActive ? "Đã duyệt" : "Chờ duyệt")</span>
                        <div class="d-flex gap-2 flex-wrap">
                            <form asp-action="ApproveAdPost" method="post" style="display:inline">
                                <input type="hidden" name="id" value="@ad.Id" />
                                <button type="submit" class="btn btn-success btn-sm">Duyệt</button>
                            </form>
                            <form asp-action="HideAdPost" method="post" style="display:inline">
                                <input type="hidden" name="id" value="@ad.Id" />
                                <button type="submit" class="btn btn-warning btn-sm">Ẩn</button>
                            </form>
                            <form asp-action="DeleteAdPost" method="post" style="display:inline" onsubmit="return confirm('Bạn có chắc muốn xóa bài này?');">
                                <input type="hidden" name="id" value="@ad.Id" />
                                <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
}
</div>
<a href="@Url.Action("Index")">Quay lại trang quản trị</a>
